============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.1, pluggy-1.6.0 -- /home/walde/projects/reddit_analyzer/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/walde/projects/reddit_analyzer
configfile: pyproject.toml
plugins: cov-6.2.1, mock-3.14.1, anyio-4.9.0
collecting ... collected 54 items

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_topics_command FAILED [  1%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_sentiment_command FAILED [  3%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_quality_command PASSED [  5%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_overlap_command FAILED [  7%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_dimensions_command PASSED [  9%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_compass_command FAILED [ 11%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_diversity_command PASSED [ 12%]
tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_help_text_for_each_command PASSED [ 14%]
tests/test_phase4d_cli_basic.py::TestErrorHandling::test_nonexistent_subreddit_error FAILED [ 16%]
tests/test_phase4d_cli_basic.py::TestErrorHandling::test_authentication_required_error FAILED [ 18%]
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_topics_json_output FAILED [ 20%]
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_sentiment_visualization FAILED [ 22%]
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_quality_metrics_table FAILED [ 24%]
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_dimensions_radar_chart FAILED [ 25%]
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_political_compass_plot FAILED [ 27%]
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_save_report_formats FAILED [ 29%]
tests/test_phase4d_cli_output.py::TestOutputContent::test_error_messages_formatting FAILED [ 31%]
tests/test_phase4d_cli_output.py::TestOutputContent::test_progress_indicators PASSED [ 33%]
tests/test_phase4d_cli_output.py::TestOutputContent::test_help_text_formatting PASSED [ 35%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_days_parameter_validation PASSED [ 37%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_limit_parameter_validation PASSED [ 38%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering FAILED [ 40%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold PASSED [ 42%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_multiple_subreddit_validation FAILED [ 44%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_save_report_functionality FAILED [ 46%]
tests/test_phase4d_cli_params.py::TestParameterValidation::test_detailed_flag_behavior FAILED [ 48%]
tests/test_phase4d_cli_params.py::TestParameterCombinations::test_combined_parameters FAILED [ 50%]
tests/test_phase4d_cli_params.py::TestParameterCombinations::test_parameter_precedence PASSED [ 51%]
tests/test_phase4d_cli_simple.py::test_cli_help PASSED                   [ 53%]
tests/test_phase4d_cli_simple.py::test_analyze_help PASSED               [ 55%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_topics_command ERROR [ 57%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_sentiment_command ERROR [ 59%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_quality_command ERROR [ 61%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_overlap_command ERROR [ 62%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_dimensions_command ERROR [ 64%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_political_compass_command ERROR [ 66%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_political_diversity_command ERROR [ 68%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_save_report_functionality ERROR [ 70%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_multiple_subreddit_analysis ERROR [ 72%]
tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_parameter_combinations ERROR [ 74%]
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_nonexistent_subreddit FAILED [ 75%]
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_invalid_topic_filter ERROR [ 77%]
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_authentication_required PASSED [ 79%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_economic_dimension FAILED [ 81%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_social_dimension PASSED [ 83%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_governance_dimension PASSED [ 85%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_dimensions_integration PASSED [ 87%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_calculate_political_compass PASSED [ 88%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_edge_cases PASSED [ 90%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDiversity::test_calculate_political_diversity_high PASSED [ 92%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDiversity::test_calculate_political_diversity_low PASSED [ 94%]
tests/test_phase4d_political_dimensions.py::TestPoliticalDiversity::test_calculate_political_diversity_centrist PASSED [ 96%]
tests/test_phase4d_political_dimensions.py::TestPoliticalClusters::test_identify_political_clusters PASSED [ 98%]
tests/test_phase4d_political_dimensions.py::TestPoliticalClusters::test_identify_political_clusters_single PASSED [100%]

==================================== ERRORS ====================================
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_topics_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 34
      def test_analyze_topics_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
---------------------------- Captured stdout setup -----------------------------
âœ… Logged in as user_test (user)
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_sentiment_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 54
      def test_analyze_sentiment_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_quality_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 65
      def test_analyze_quality_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_overlap_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 77
      def test_analyze_overlap_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_dimensions_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 86
      def test_analyze_dimensions_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_political_compass_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 95
      def test_analyze_political_compass_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_analyze_political_diversity_command _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 102
      def test_analyze_political_diversity_command(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_save_report_functionality _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 109
      def test_save_report_functionality(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_multiple_subreddit_analysis _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 134
      def test_multiple_subreddit_analysis(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
_ ERROR at setup of TestAnalyzeCommandsWithRealData.test_parameter_combinations _
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 146
      def test_parameter_combinations(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
__ ERROR at setup of TestErrorHandlingWithRealData.test_invalid_topic_filter ___
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 183
      def test_invalid_topic_filter(self, setup_test_data):
file /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py, line 24
  @pytest.fixture
  def setup_test_data(authenticated_session, test_database_with_data):
E       fixture 'test_database_with_data' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, authenticated_session, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_session, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mocker, module_mocker, monkeypatch, no_cover, override_get_db, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, setup_test_data, test_db, test_engine, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_with_real_data.py:24
=================================== FAILURES ===================================
_______________ TestAnalyzeCommands.test_analyze_topics_command ________________
tests/test_phase4d_cli_basic.py:163: in test_analyze_topics_command
    assert any(
E   assert False
E    +  where False = any(<generator object TestAnalyzeCommands.test_analyze_topics_command.<locals>.<genexpr> at 0x74e7e38873e0>)
______________ TestAnalyzeCommands.test_analyze_sentiment_command ______________
tests/test_phase4d_cli_basic.py:195: in test_analyze_sentiment_command
    assert any(
E   assert False
E    +  where False = any(<generator object TestAnalyzeCommands.test_analyze_sentiment_command.<locals>.<genexpr> at 0x74e7e44a29b0>)
_______________ TestAnalyzeCommands.test_analyze_overlap_command _______________
tests/test_phase4d_cli_basic.py:243: in test_analyze_overlap_command
    mock_ctx.query().filter_by.side_effect = side_effect
    ^^^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1134: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1138: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/unittest/mock.py:1199: in _execute_mock_call
    result = effect(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: mock_db_session.<locals>.query_side_effect() missing 1 required positional argument: 'model'
__________ TestAnalyzeCommands.test_analyze_political_compass_command __________
tests/test_phase4d_cli_basic.py:315: in test_analyze_political_compass_command
    assert result.exit_code == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = <Result TypeError('unsupported format string passed to MagicMock.__format__')>.exit_code
______________ TestErrorHandling.test_nonexistent_subreddit_error ______________
tests/test_phase4d_cli_basic.py:372: in test_nonexistent_subreddit_error
    assert result.exit_code == 1
E   assert 0 == 1
E    +  where 0 = <Result okay>.exit_code
_____________ TestErrorHandling.test_authentication_required_error _____________
tests/test_phase4d_cli_basic.py:394: in test_authentication_required_error
    assert result.exit_code == 1
E   assert 0 == 1
E    +  where 0 = <Result okay>.exit_code
_________________ TestCLIOutputFormats.test_topics_json_output _________________
tests/test_phase4d_cli_output.py:115: in test_topics_json_output
    assert result.exit_code == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
______________ TestCLIOutputFormats.test_sentiment_visualization _______________
tests/test_phase4d_cli_output.py:151: in test_sentiment_visualization
    assert "Sentiment" in result.stdout
E   assert 'Sentiment' in "\u280b Analyzing sentiment for 'healthcare' topic...\nNo significant discussions about 'healthcare' found in r/test_politics\n"
E    +  where "\u280b Analyzing sentiment for 'healthcare' topic...\nNo significant discussions about 'healthcare' found in r/test_politics\n" = <Result okay>.stdout
_______________ TestCLIOutputFormats.test_quality_metrics_table ________________
tests/test_phase4d_cli_output.py:174: in test_quality_metrics_table
    assert (
E   AssertionError: assert ('constructiveness' in '\u280b analyzing discussion quality...\n\ndiscussion quality analysis for r/test_politics\nperiod: 2025-06-25 to 2025-07-02\nposts analyzed: 0\n\n\ntop quality discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 post title                                         \u2503 co\u2026 \u2503 qua\u2026 \u2503 ci\u2026 \u2503 div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' or '0.75' in '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n')
E    +  where '\u280b analyzing discussion quality...\n\ndiscussion quality analysis for r/test_politics\nperiod: 2025-06-25 to 2025-07-02\nposts analyzed: 0\n\n\ntop quality discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 post title                                         \u2503 co\u2026 \u2503 qua\u2026 \u2503 ci\u2026 \u2503 div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' = <built-in method lower of str object at 0x245072d0>()
E    +    where <built-in method lower of str object at 0x245072d0> = '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'.lower
E    +      where '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' = <Result okay>.stdout
E    +  and   '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' = <Result okay>.stdout
_______________ TestCLIOutputFormats.test_dimensions_radar_chart _______________
tests/test_phase4d_cli_output.py:211: in test_dimensions_radar_chart
    assert "economic" in result.stdout.lower()
E   AssertionError: assert 'economic' in '\u280b calculating political diversity...\n\npolitical dimensions analysis for r/test_politics\nperiod: 2025-06-02 to 2025-07-02\nposts analyzed: 0\n\n           average political positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 dimension \u2503 average score \u2503 position \u2503 std dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 diversity metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 political diversity index: 0.00/1.0                                          \u2502\n\u2502 interpretation: low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n'
E    +  where '\u280b calculating political diversity...\n\npolitical dimensions analysis for r/test_politics\nperiod: 2025-06-02 to 2025-07-02\nposts analyzed: 0\n\n           average political positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 dimension \u2503 average score \u2503 position \u2503 std dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 diversity metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 political diversity index: 0.00/1.0                                          \u2502\n\u2502 interpretation: low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n' = <built-in method lower of str object at 0x244a3b80>()
E    +    where <built-in method lower of str object at 0x244a3b80> = '\u280b Calculating political diversity...\n\nPolitical Dimensions Analysis for r/test_politics\nPeriod: 2025-06-02 to 2025-07-02\nPosts analyzed: 0\n\n           Average Political Positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Dimension \u2503 Average Score \u2503 Position \u2503 Std Dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Diversity Metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Political Diversity Index: 0.00/1.0                                          \u2502\n\u2502 Interpretation: Low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n'.lower
E    +      where '\u280b Calculating political diversity...\n\nPolitical Dimensions Analysis for r/test_politics\nPeriod: 2025-06-02 to 2025-07-02\nPosts analyzed: 0\n\n           Average Political Positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Dimension \u2503 Average Score \u2503 Position \u2503 Std Dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Diversity Metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Political Diversity Index: 0.00/1.0                                          \u2502\n\u2502 Interpretation: Low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n' = <Result okay>.stdout
_______________ TestCLIOutputFormats.test_political_compass_plot _______________
tests/test_phase4d_cli_output.py:252: in test_political_compass_plot
    assert result.exit_code == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = <Result TypeError('unsupported format string passed to MagicMock.__format__')>.exit_code
________________ TestCLIOutputFormats.test_save_report_formats _________________
tests/test_phase4d_cli_output.py:281: in test_save_report_formats
    assert result.exit_code == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
_______________ TestOutputContent.test_error_messages_formatting _______________
tests/test_phase4d_cli_output.py:308: in test_error_messages_formatting
    assert result.exit_code == 1
E   assert 0 == 1
E    +  where 0 = <Result okay>.exit_code
____________ TestParameterValidation.test_topic_parameter_filtering ____________
tests/test_phase4d_cli_params.py:137: in test_topic_parameter_filtering
    assert result.exit_code == 0
E   assert 1 == 0
E    +  where 1 = <Result SystemExit(1)>.exit_code
__________ TestParameterValidation.test_multiple_subreddit_validation __________
tests/test_phase4d_cli_params.py:193: in test_multiple_subreddit_validation
    assert result.exit_code == 1
E   assert 0 == 1
E    +  where 0 = <Result okay>.exit_code
____________ TestParameterValidation.test_save_report_functionality ____________
tests/test_phase4d_cli_params.py:213: in test_save_report_functionality
    assert result.exit_code == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
_____________ TestParameterValidation.test_detailed_flag_behavior ______________
tests/test_phase4d_cli_params.py:243: in test_detailed_flag_behavior
    assert result.exit_code == 0
E   assert 2 == 0
E    +  where 2 = <Result SystemExit(2)>.exit_code
______________ TestParameterCombinations.test_combined_parameters ______________
tests/test_phase4d_cli_params.py:269: in test_combined_parameters
    assert result.exit_code == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
___________ TestErrorHandlingWithRealData.test_nonexistent_subreddit ___________
tests/test_phase4d_cli_with_real_data.py:179: in test_nonexistent_subreddit
    assert result.exit_code == 1
E   assert 0 == 1
E    +  where 0 = <Result okay>.exit_code
_______ TestPoliticalDimensionsAnalyzer.test_analyze_economic_dimension ________
tests/test_phase4d_political_dimensions.py:81: in test_analyze_economic_dimension
    assert result.dimensions["economic"]["score"] > 0  # Should lean right
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert -1.0 > 0
=============================== warnings summary ===============================
reddit_analyzer/database.py:26
  /home/walde/projects/reddit_analyzer/reddit_analyzer/database.py:26: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /home/walde/projects/reddit_analyzer/.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

.venv/lib/python3.12/site-packages/spacy/cli/_util.py:23
  /home/walde/projects/reddit_analyzer/.venv/lib/python3.12/site-packages/spacy/cli/_util.py:23: DeprecationWarning: Importing 'parser.split_arg_string' is deprecated, it will only be available in 'shell_completion' in Click 9.0.
    from click.parser import split_arg_string

.venv/lib/python3.12/site-packages/weasel/util/config.py:8
  /home/walde/projects/reddit_analyzer/.venv/lib/python3.12/site-packages/weasel/util/config.py:8: DeprecationWarning: Importing 'parser.split_arg_string' is deprecated, it will only be available in 'shell_completion' in Click 9.0.
    from click.parser import split_arg_string

tests/test_phase4d_cli_basic.py: 35 warnings
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_basic.py:98: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    post.created_utc = datetime.utcnow() - timedelta(days=i)

tests/test_phase4d_cli_basic.py: 3 warnings
tests/test_phase4d_cli_output.py: 4 warnings
tests/test_phase4d_cli_params.py: 12 warnings
tests/test_phase4d_cli_with_real_data.py: 1 warning
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:77: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_sentiment_command
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_sentiment_visualization
tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering
tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering
tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering
tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering
tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:240: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_quality_command
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_quality_metrics_table
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold
tests/test_phase4d_cli_params.py::TestParameterValidation::test_min_comments_threshold
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:309: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_dimensions_command
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_dimensions_radar_chart
tests/test_phase4d_cli_params.py::TestParameterValidation::test_detailed_flag_behavior
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:783: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_compass_command
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_basic.py:288: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    mock_analysis.analysis_start_date = datetime.utcnow() - timedelta(days=7)

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_compass_command
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_basic.py:289: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    mock_analysis.analysis_end_date = datetime.utcnow()

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_compass_command
tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_political_compass_plot
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:891: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    >= datetime.utcnow() - timedelta(days=7),

tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_diversity_command
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:922: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_phase4d_cli_output.py: 35 warnings
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_output.py:64: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    post.created_utc = datetime.utcnow() - timedelta(days=i)

tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_political_compass_plot
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_output.py:226: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    mock_analysis.analysis_start_date = datetime.utcnow() - timedelta(days=7)

tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_political_compass_plot
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_cli_output.py:227: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    mock_analysis.analysis_end_date = datetime.utcnow()

tests/test_phase4d_cli_params.py::TestParameterValidation::test_multiple_subreddit_validation
tests/test_phase4d_cli_params.py::TestParameterValidation::test_multiple_subreddit_validation
  /home/walde/projects/reddit_analyzer/reddit_analyzer/cli/analyze.py:406: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_topics_command
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_authentication_required
  /home/walde/projects/reddit_analyzer/reddit_analyzer/utils/auth.py:25: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "exp": datetime.utcnow()

tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_topics_command
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_authentication_required
  /home/walde/projects/reddit_analyzer/reddit_analyzer/utils/auth.py:27: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "iat": datetime.utcnow(),

tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_topics_command
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_authentication_required
  /home/walde/projects/reddit_analyzer/reddit_analyzer/utils/auth.py:36: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "exp": datetime.utcnow() + timedelta(days=self.refresh_token_expire_days),

tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_topics_command
tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_authentication_required
  /home/walde/projects/reddit_analyzer/reddit_analyzer/utils/auth.py:37: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "iat": datetime.utcnow(),

tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_economic_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_social_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_dimensions_integration
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_calculate_political_compass
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_political_dimensions.py:35: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    post1.created_utc = datetime.utcnow()

tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_economic_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_social_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_dimensions_integration
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_calculate_political_compass
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_political_dimensions.py:44: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    post2.created_utc = datetime.utcnow()

tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_economic_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_social_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_dimensions_integration
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_calculate_political_compass
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_political_dimensions.py:53: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    post3.created_utc = datetime.utcnow()

tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_economic_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_social_dimension
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_dimensions_integration
tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_calculate_political_compass
  /home/walde/projects/reddit_analyzer/tests/test_phase4d_political_dimensions.py:60: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    post4.created_utc = datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.3-final-0 ________________

Name                                                        Stmts   Miss  Cover   Missing
-----------------------------------------------------------------------------------------
reddit_analyzer/__init__.py                                     0      0   100%
reddit_analyzer/analytics/__init__.py                           5      5     0%   8-13
reddit_analyzer/analytics/metrics_calculator.py               356    356     0%   8-978
reddit_analyzer/analytics/statistical_analyzer.py             364    364     0%   9-939
reddit_analyzer/api/__init__.py                                 0      0   100%
reddit_analyzer/api/admin.py                                  109    109     0%   3-263
reddit_analyzer/api/auth.py                                   113    113     0%   3-239
reddit_analyzer/cli/__init__.py                                 0      0   100%
reddit_analyzer/cli/admin.py                                  243    205    16%   33-87, 99-159, 169-198, 205-232, 239-303, 315-374, 385-449
reddit_analyzer/cli/analyze.py                                498    222    55%   45-51, 71, 123-143, 148-161, 210, 235, 266-283, 304, 335-338, 345-359, 388, 391-392, 453-458, 461-466, 525-544, 592-633, 652-673, 691-692, 728-743, 749-750, 755-756, 777, 806, 815-833, 857-866, 882, 900-903, 916, 958-961, 972-975, 1021-1034, 1051-1066, 1101, 1135, 1139, 1153-1172, 1176-1186, 1193-1215, 1228-1273, 1277
reddit_analyzer/cli/auth.py                                    41     27    34%   21-29, 35-37, 43, 49-69
reddit_analyzer/cli/data.py                                   188    155    18%   26-83, 90-130, 142-299, 306-323, 332-341, 348-365
reddit_analyzer/cli/main.py                                    48     17    65%   58-59, 65-87, 91
reddit_analyzer/cli/nlp.py                                    319    287    10%   36-117, 128-244, 255-374, 384-553, 565-708, 712
reddit_analyzer/cli/reports.py                                182    154    15%   34-148, 162-245, 257-344, 360-379
reddit_analyzer/cli/utils/__init__.py                           0      0   100%
reddit_analyzer/cli/utils/ascii_charts.py                     126    110    13%   22-40, 46-59, 65-104, 110-152, 162-183, 189-204, 208-216
reddit_analyzer/cli/utils/auth_manager.py                     115     38    67%   43-47, 58-60, 71, 80-81, 88-96, 106-107, 130-134, 139-142, 152-168, 180, 186
reddit_analyzer/cli/utils/database.py                          16     16     0%   3-34
reddit_analyzer/cli/utils/logging_config.py                    30      2    93%   16, 18
reddit_analyzer/cli/visualization.py                          217    191    12%   29-120, 130-280, 292-370, 385-451
reddit_analyzer/collectors/__init__.py                          0      0   100%
reddit_analyzer/config.py                                      42     11    74%   38-55, 82, 84, 91
reddit_analyzer/core/__init__.py                                0      0   100%
reddit_analyzer/core/cache.py                                 166    166     0%   1-270
reddit_analyzer/core/rate_limiter.py                           68     68     0%   1-118
reddit_analyzer/core/request_queue.py                         146    146     0%   1-268
reddit_analyzer/data/political_topics.py                       17     10    41%   289-291, 296-298, 303-306
reddit_analyzer/database.py                                    30      7    77%   46, 51, 56, 62-66
reddit_analyzer/middleware/__init__.py                          2      2     0%   3-12
reddit_analyzer/middleware/auth.py                             83     83     0%   3-134
reddit_analyzer/ml/__init__.py                                  6      6     0%   8-14
reddit_analyzer/ml/models/__init__.py                           0      0   100%
reddit_analyzer/ml/models/content_classifier.py               268    268     0%   8-872
reddit_analyzer/ml/models/popularity_predictor.py             230    230     0%   8-680
reddit_analyzer/ml/models/user_classifier.py                  337    337     0%   8-894
reddit_analyzer/ml/trainers/__init__.py                         0      0   100%
reddit_analyzer/ml/utils/__init__.py                            0      0   100%
reddit_analyzer/models/__init__.py                             14      0   100%
reddit_analyzer/models/base.py                                 12      2    83%   25, 29
reddit_analyzer/models/collection_job.py                       87      5    94%   27, 51, 70, 88, 111
reddit_analyzer/models/comment.py                              19      1    95%   31
reddit_analyzer/models/ml_prediction.py                        21      1    95%   58
reddit_analyzer/models/political_analysis.py                   88      4    95%   58, 94, 148, 204
reddit_analyzer/models/post.py                                 24      1    96%   43
reddit_analyzer/models/subreddit.py                            16      1    94%   28
reddit_analyzer/models/subreddit_analytics.py                  36      1    97%   81
reddit_analyzer/models/text_analysis.py                        25      1    96%   62
reddit_analyzer/models/topic.py                                22      1    95%   55
reddit_analyzer/models/user.py                                 35      5    86%   44, 49, 54, 58, 61
reddit_analyzer/models/user_metric.py                          27      1    96%   74
reddit_analyzer/monitoring/__init__.py                          0      0   100%
reddit_analyzer/processing/__init__.py                          5      0   100%
reddit_analyzer/processing/feature_extractor.py               190    171    10%   35-60, 75-97, 109-131, 143-166, 180-212, 226-244, 256-295, 307-345, 357-391, 403-446, 455-525
reddit_analyzer/processing/sentiment_analyzer.py              166    145    13%   19-20, 48-76, 81-105, 117-130, 142-179, 197-238, 264-299, 318-356, 371-394, 409-436, 451-476, 480
reddit_analyzer/processing/text_processor.py                  128    109    15%   33-35, 39-53, 58-64, 87-131, 144-170, 182-202, 217-253, 265-274, 286-305, 326-356
reddit_analyzer/processing/topic_modeler.py                   279    243    13%   37, 73-89, 93-121, 133-150, 162-200, 206-222, 234-281, 285-317, 323-382, 394-427, 439-467, 471-486, 490-507, 519-533, 548-567, 579-595, 599-623, 627-647, 651
reddit_analyzer/services/__init__.py                            2      0   100%
reddit_analyzer/services/enhanced_reddit_client.py            205    205     0%   3-504
reddit_analyzer/services/nlp_service.py                       167    118    29%   52-55, 60-63, 68-71, 76-79, 92-162, 177-191, 204-236, 249-265, 277-285, 300-314, 318-359, 363-377, 381, 397-399
reddit_analyzer/services/political_dimensions_analyzer.py     174     16    91%   85-89, 108, 212-215, 309, 313, 412, 416, 441, 460, 488
reddit_analyzer/services/reddit_client.py                      77     64    17%   18-39, 43-58, 68-107, 113-142, 146-160, 164-172
reddit_analyzer/services/topic_analyzer.py                    160    127    21%   53-98, 111-155, 183-196, 207-217, 222-235, 239-273, 277-324, 328-346, 350-377
reddit_analyzer/tasks/__init__.py                               3      3     0%   8-22
reddit_analyzer/tasks/analysis_tasks.py                       173    173     0%   8-661
reddit_analyzer/tasks/processing_tasks.py                     228    228     0%   8-674
reddit_analyzer/utils/__init__.py                               0      0   100%
reddit_analyzer/utils/auth.py                                  74     24    68%   47-50, 56, 61-64, 85, 97-105, 123-124, 128-136
reddit_analyzer/utils/logging.py                               21     12    43%   13-33, 38, 47
reddit_analyzer/validators/__init__.py                          0      0   100%
reddit_analyzer/validators/data_validator.py                  234    234     0%   3-451
reddit_analyzer/validators/schemas.py                         254    254     0%   3-424
reddit_analyzer/workers/__init__.py                             0      0   100%
reddit_analyzer/workers/celery_app.py                           7      7     0%   3-73
reddit_analyzer/workers/tasks.py                              214    214     0%   3-567
-----------------------------------------------------------------------------------------
TOTAL                                                        7552   6076    20%
Coverage HTML written to dir htmlcov
=========================== short test summary info ============================
FAILED tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_topics_command - assert False
 +  where False = any(<generator object TestAnalyzeCommands.test_analyze_topics_command.<locals>.<genexpr> at 0x74e7e38873e0>)
FAILED tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_sentiment_command - assert False
 +  where False = any(<generator object TestAnalyzeCommands.test_analyze_sentiment_command.<locals>.<genexpr> at 0x74e7e44a29b0>)
FAILED tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_overlap_command - TypeError: mock_db_session.<locals>.query_side_effect() missing 1 required positional argument: 'model'
FAILED tests/test_phase4d_cli_basic.py::TestAnalyzeCommands::test_analyze_political_compass_command - AssertionError: assert 1 == 0
 +  where 1 = <Result TypeError('unsupported format string passed to MagicMock.__format__')>.exit_code
FAILED tests/test_phase4d_cli_basic.py::TestErrorHandling::test_nonexistent_subreddit_error - assert 0 == 1
 +  where 0 = <Result okay>.exit_code
FAILED tests/test_phase4d_cli_basic.py::TestErrorHandling::test_authentication_required_error - assert 0 == 1
 +  where 0 = <Result okay>.exit_code
FAILED tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_topics_json_output - AssertionError: assert 1 == 0
 +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
FAILED tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_sentiment_visualization - assert 'Sentiment' in "\u280b Analyzing sentiment for 'healthcare' topic...\nNo significant discussions about 'healthcare' found in r/test_politics\n"
 +  where "\u280b Analyzing sentiment for 'healthcare' topic...\nNo significant discussions about 'healthcare' found in r/test_politics\n" = <Result okay>.stdout
FAILED tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_quality_metrics_table - AssertionError: assert ('constructiveness' in '\u280b analyzing discussion quality...\n\ndiscussion quality analysis for r/test_politics\nperiod: 2025-06-25 to 2025-07-02\nposts analyzed: 0\n\n\ntop quality discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 post title                                         \u2503 co\u2026 \u2503 qua\u2026 \u2503 ci\u2026 \u2503 div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' or '0.75' in '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n')
 +  where '\u280b analyzing discussion quality...\n\ndiscussion quality analysis for r/test_politics\nperiod: 2025-06-25 to 2025-07-02\nposts analyzed: 0\n\n\ntop quality discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 post title                                         \u2503 co\u2026 \u2503 qua\u2026 \u2503 ci\u2026 \u2503 div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' = <built-in method lower of str object at 0x245072d0>()
 +    where <built-in method lower of str object at 0x245072d0> = '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'.lower
 +      where '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' = <Result okay>.stdout
 +  and   '\u280b Analyzing discussion quality...\n\nDiscussion Quality Analysis for r/test_politics\nPeriod: 2025-06-25 to 2025-07-02\nPosts analyzed: 0\n\n\nTop Quality Discussions:\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Post Title                                         \u2503 Co\u2026 \u2503 Qua\u2026 \u2503 Ci\u2026 \u2503 Div\u2026 \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n' = <Result okay>.stdout
FAILED tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_dimensions_radar_chart - AssertionError: assert 'economic' in '\u280b calculating political diversity...\n\npolitical dimensions analysis for r/test_politics\nperiod: 2025-06-02 to 2025-07-02\nposts analyzed: 0\n\n           average political positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 dimension \u2503 average score \u2503 position \u2503 std dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 diversity metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 political diversity index: 0.00/1.0                                          \u2502\n\u2502 interpretation: low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n'
 +  where '\u280b calculating political diversity...\n\npolitical dimensions analysis for r/test_politics\nperiod: 2025-06-02 to 2025-07-02\nposts analyzed: 0\n\n           average political positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 dimension \u2503 average score \u2503 position \u2503 std dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 diversity metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 political diversity index: 0.00/1.0                                          \u2502\n\u2502 interpretation: low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n' = <built-in method lower of str object at 0x244a3b80>()
 +    where <built-in method lower of str object at 0x244a3b80> = '\u280b Calculating political diversity...\n\nPolitical Dimensions Analysis for r/test_politics\nPeriod: 2025-06-02 to 2025-07-02\nPosts analyzed: 0\n\n           Average Political Positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Dimension \u2503 Average Score \u2503 Position \u2503 Std Dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Diversity Metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Political Diversity Index: 0.00/1.0                                          \u2502\n\u2502 Interpretation: Low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n'.lower
 +      where '\u280b Calculating political diversity...\n\nPolitical Dimensions Analysis for r/test_politics\nPeriod: 2025-06-02 to 2025-07-02\nPosts analyzed: 0\n\n           Average Political Positions            \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Dimension \u2503 Average Score \u2503 Position \u2503 Std Dev \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Diversity Metrics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Political Diversity Index: 0.00/1.0                                          \u2502\n\u2502 Interpretation: Low diversity                                                \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n' = <Result okay>.stdout
FAILED tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_political_compass_plot - AssertionError: assert 1 == 0
 +  where 1 = <Result TypeError('unsupported format string passed to MagicMock.__format__')>.exit_code
FAILED tests/test_phase4d_cli_output.py::TestCLIOutputFormats::test_save_report_formats - AssertionError: assert 1 == 0
 +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
FAILED tests/test_phase4d_cli_output.py::TestOutputContent::test_error_messages_formatting - assert 0 == 1
 +  where 0 = <Result okay>.exit_code
FAILED tests/test_phase4d_cli_params.py::TestParameterValidation::test_topic_parameter_filtering - assert 1 == 0
 +  where 1 = <Result SystemExit(1)>.exit_code
FAILED tests/test_phase4d_cli_params.py::TestParameterValidation::test_multiple_subreddit_validation - assert 0 == 1
 +  where 0 = <Result okay>.exit_code
FAILED tests/test_phase4d_cli_params.py::TestParameterValidation::test_save_report_functionality - AssertionError: assert 1 == 0
 +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
FAILED tests/test_phase4d_cli_params.py::TestParameterValidation::test_detailed_flag_behavior - assert 2 == 0
 +  where 2 = <Result SystemExit(2)>.exit_code
FAILED tests/test_phase4d_cli_params.py::TestParameterCombinations::test_combined_parameters - AssertionError: assert 1 == 0
 +  where 1 = <Result TypeError('Object of type MagicMock is not JSON serializable')>.exit_code
FAILED tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_nonexistent_subreddit - assert 0 == 1
 +  where 0 = <Result okay>.exit_code
FAILED tests/test_phase4d_political_dimensions.py::TestPoliticalDimensionsAnalyzer::test_analyze_economic_dimension - assert -1.0 > 0
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_topics_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_sentiment_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_quality_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_overlap_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_dimensions_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_political_compass_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_analyze_political_diversity_command
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_save_report_functionality
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_multiple_subreddit_analysis
ERROR tests/test_phase4d_cli_with_real_data.py::TestAnalyzeCommandsWithRealData::test_parameter_combinations
ERROR tests/test_phase4d_cli_with_real_data.py::TestErrorHandlingWithRealData::test_invalid_topic_filter
=========== 20 failed, 23 passed, 145 warnings, 11 errors in 16.17s ============
